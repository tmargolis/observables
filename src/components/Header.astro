---
interface Props {
  prevProject?: { title: string; slug: string };
  nextProject?: { title: string; slug: string };
}

const { prevProject, nextProject } = Astro.props;
---

<nav class="fixed top-0 w-full z-40 p-6 flex justify-between items-center glass mix-blend-difference text-gray-300">
  <!-- Left Side -->
  <div class="flex items-center gap-8">
    <a href="/" class="font-serif text-2xl tracking-tight text-white hover:text-glow transition-all duration-300">
      OBSERVABLES
    </a>
    <div class="hidden md:flex gap-6 font-mono text-xs tracking-[0.2em] uppercase">
      <a href="/" class="hover:text-white hover:text-glow transition-all duration-300">Home</a>
      <a href="/narrative/" class="hover:text-white hover:text-glow transition-all duration-300">Narrative</a>
      <a href="/works/" class="hover:text-white hover:text-glow transition-all duration-300">Works</a>
    </div>
  </div>

  <!-- Center (Project Nav) -->
  {prevProject && nextProject && (
    <div class="hidden lg:flex gap-8 font-mono text-xs tracking-[0.2em] uppercase absolute left-1/2 transform -translate-x-1/2">
       <a href={`/works/${prevProject.slug}/`} class="hover:text-white hover:text-glow transition-all duration-300 group">
          &larr; <span class="hidden xl:inline">{prevProject.title}</span>
       </a>
       <span class="text-white/20">|</span>
       <a href={`/works/${nextProject.slug}/`} class="hover:text-white hover:text-glow transition-all duration-300 group">
          <span class="hidden xl:inline">{nextProject.title}</span> &rarr;
       </a>
    </div>
  )}

  <!-- Right Side -->
  <div class="flex items-center gap-6 font-mono text-xs tracking-[0.2em] uppercase">
    <!-- Mobile/Tablet Project Nav (Simplified) -->
    {prevProject && nextProject && (
      <div class="flex lg:hidden gap-4 mr-4 border-r border-white/20 pr-4">
         <a href={`/works/${prevProject.slug}/`} class="hover:text-white">&larr;</a>
         <a href={`/works/${nextProject.slug}/`} class="hover:text-white">&rarr;</a>
      </div>
    )}

    <a href="/walkthrough/" class="hover:text-white hover:text-glow transition-all duration-300">Walkthrough</a>
    <a href="/logistics/" id="nav-logistics" class="hidden hover:text-white hover:text-glow transition-all duration-300">Logistics</a>
  </div>
</nav>

<script>
  // Check Clerk auth status to show Logistics link
  window.addEventListener("load", async function () {
    const checkClerk = setInterval(async () => {
      // @ts-ignore
      if (window.Clerk) {
        clearInterval(checkClerk);
        // @ts-ignore
        await window.Clerk.load();
        
        // @ts-ignore
        if (window.Clerk.user) {
          const logisticsLink = document.getElementById('nav-logistics');
          if (logisticsLink) logisticsLink.classList.remove('hidden');
        }
      }
    }, 100);
  });
</script>
